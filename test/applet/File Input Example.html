<html>
<head>
<title>File Input Example</title>
<style type="text/css">
<!--
  :link { color: rgb(110, 0, 110); } 
  :visited { color: rgb(110, 0, 110); } 
  body { margin-left: 5px; font-family: arial, sans-serif; 
         background: white; font-size: 12pt } 
  h2 { background: rgb(166,172,255); 
       font-size: 15pt; 
       padding-left: 6px; padding-right: 6px; padding-top: 6px; 
       padding-bottom: 6px; } 
  p { margin-left: 10px; } 
  pre { margin-left: 13px; background: rgb(225,225,225); 
        font-family: monospace; padding-left: 3px; padding-right: 3px; 
        padding-top: 3px; padding-bottom: 3px; } 
-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 4.1beta4pre1.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(File Input Example.nlogo), and the file NetLogoLite.jar
must all be in the same directory.  (You can copy NetLogoLite.jar
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If NetLogoLite.jar and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put 
a single copy of NetLogoLite.jar in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="597" height="366">
  <param name="DefaultModel"
         value="File%20Input%20Example.nlogo">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="File%20Input%20Example.nlogo">File Input Example.nlogo</a>
</p>
<h2>WHAT IS IT?</h2>
<p>This code example shows how to read in information from a file directly from NetLogo code.</p>
<p>In this example, we use the data to make a complicated patch maze. LOAD-PATCH-DATA will load in patch data from a file to a list, where SHOW-PATH-DATA will display all the data that was loaded in the view.  By default, there is only one file that is included that can be loaded in.  It is called &quot;File IO Patch Data.txt&quot; and it is located in the code example's directory.  You can use LOAD-OWN-PATCH-DATA to see how one would let the user decide which file to choose.  The function SAVE-PATCH-DATA is in the procedures if you wish to see how the file &quot;File IO Patch Data.txt&quot; was created.  For more information about File Output, see the appropriate code example.</p>
<p>File Input can be used to load in complicated information or to give the user the option to choose data.  A good example is loading in patch information (such a maze in this case), or turtle information (such as coordinates).  The difference between doing this and import-world is that the user can customize the way the data is imported or exported -- you can save or load only the relevant data.</p>
<p>For more information see the other File IO code examples.</p><br>
<h2>CODE</h2>
<pre><font color="#007f69">globals</font><font color="#000000"> [ patch-data ]

</font><font color="#5a5a5a">;; This procedure loads in patch data from a file.  The format of the file is: pxcor</font><font color="#000000">
</font><font color="#5a5a5a">;; pycor pcolor.  You can view the file by opening the file File IO Patch Data.txt</font><font color="#000000">
</font><font color="#5a5a5a">;; using a simple text editor.  Note that it automatically loads the file &quot;File IO</font><font color="#000000">
</font><font color="#5a5a5a">;; Patch Data.txt&quot;. To have the user choose their own file, see load-own-patch-data.</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> load-patch-data

  </font><font color="#5a5a5a">;; We check to make sure the file exists first</font><font color="#000000">
  </font><font color="#0000aa">ifelse</font><font color="#000000"> ( </font><font color="#660096">file-exists?</font><font color="#000000"> </font><font color="#963700">&quot;File IO Patch Data.txt&quot;</font><font color="#000000"> )
  [
    </font><font color="#5a5a5a">;; We are saving the data into a list, so it only needs to be loaded once.</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> patch-data []

    </font><font color="#5a5a5a">;; This opens the file, so we can use it.</font><font color="#000000">
    </font><font color="#0000aa">file-open</font><font color="#000000"> </font><font color="#963700">&quot;File IO Patch Data.txt&quot;</font><font color="#000000">

    </font><font color="#5a5a5a">;; Read in all the data in the file</font><font color="#000000">
    </font><font color="#0000aa">while</font><font color="#000000"> [ </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">file-at-end?</font><font color="#000000"> ]
    [
      </font><font color="#5a5a5a">;; file-read gives you variables.  In this case numbers.</font><font color="#000000">
      </font><font color="#5a5a5a">;; We store them in a double list (ex [[1 1 9.9999] [1 2 9.9999] ...</font><font color="#000000">
      </font><font color="#5a5a5a">;; Each iteration we append the next three-tuple to the current list</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> patch-data </font><font color="#660096">sentence</font><font color="#000000"> patch-data (</font><font color="#660096">list</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> </font><font color="#660096">file-read</font><font color="#000000"> </font><font color="#660096">file-read</font><font color="#000000"> </font><font color="#660096">file-read</font><font color="#000000">))
    ]

    </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;File loading complete!&quot;</font><font color="#000000">

    </font><font color="#5a5a5a">;; Done reading in patch information.  Close the file.</font><font color="#000000">
    </font><font color="#0000aa">file-close</font><font color="#000000">
  ]
  [ </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;There is no File IO Patch Data.txt file in current directory!&quot;</font><font color="#000000"> ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; This procedure does the same thing as the above one, except it lets the user choose</font><font color="#000000">
</font><font color="#5a5a5a">;; the file to load from.  Note that we need to check that it isn't false.  This because</font><font color="#000000">
</font><font color="#5a5a5a">;; it will return false if the user cancels the file dialog.  There is currently only</font><font color="#000000">
</font><font color="#5a5a5a">;; one file to load from, but you can create your own using the function save-patch-data</font><font color="#000000">
</font><font color="#5a5a5a">;; near the bottom which saves all the current patches into a file.</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> load-own-patch-data
  </font><font color="#0000aa">let</font><font color="#000000"> file </font><font color="#660096">user-new-file</font><font color="#000000">

  </font><font color="#0000aa">if</font><font color="#000000"> ( file </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> )
  [
    </font><font color="#0000aa">set</font><font color="#000000"> patch-data []
    </font><font color="#0000aa">file-open</font><font color="#000000"> file

    </font><font color="#0000aa">while</font><font color="#000000"> [ </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">file-at-end?</font><font color="#000000"> ]
      [ </font><font color="#0000aa">set</font><font color="#000000"> patch-data </font><font color="#660096">sentence</font><font color="#000000"> patch-data (</font><font color="#660096">list</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> </font><font color="#660096">file-read</font><font color="#000000"> </font><font color="#660096">file-read</font><font color="#000000"> </font><font color="#660096">file-read</font><font color="#000000">)) ]

    </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;File loading complete!&quot;</font><font color="#000000">
    </font><font color="#0000aa">file-close</font><font color="#000000">
  ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; This procedure will use the loaded in patch data to color the patches.</font><font color="#000000">
</font><font color="#5a5a5a">;; The list is a list of three-tuples where the first item is the pxcor, the</font><font color="#000000">
</font><font color="#5a5a5a">;; second is the pycor, and the third is pcolor. Ex. [ [ 0 0 5 ] [ 1 34 26 ] ... ]</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> show-patch-data
  </font><font color="#0000aa">cp</font><font color="#000000"> </font><font color="#0000aa">ct</font><font color="#000000">
  </font><font color="#0000aa">ifelse</font><font color="#000000"> ( </font><font color="#660096">is-list?</font><font color="#000000"> patch-data )
    [ </font><font color="#0000aa">foreach</font><font color="#000000"> patch-data [ </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> ? </font><font color="#660096">item</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ? [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">last</font><font color="#000000"> ? ] ] ]
    [ </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;You need to load in patch data first!&quot;</font><font color="#000000"> ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; This is the procedure that was used to create the file &quot;File IO Patch Data.txt&quot;.</font><font color="#000000">
</font><font color="#5a5a5a">;; You can also use it to create your own files.  See File Output code example for more</font><font color="#000000">
</font><font color="#5a5a5a">;; details on File Output.</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> save-patch-data
  </font><font color="#0000aa">let</font><font color="#000000"> file </font><font color="#660096">user-new-file</font><font color="#000000">

  </font><font color="#0000aa">if</font><font color="#000000"> ( file </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> )
  [
    </font><font color="#0000aa">file-write</font><font color="#000000"> file
    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">
    [
      </font><font color="#0000aa">file-write</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000">
      </font><font color="#0000aa">file-write</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000">
      </font><font color="#0000aa">file-write</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000">
    ]
    </font><font color="#0000aa">file-close</font><font color="#000000">
  ]
</font><font color="#007f69">end</font><font color="#000000">
</font>
</pre>

</body>
</html>
