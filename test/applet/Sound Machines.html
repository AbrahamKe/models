<html>
<head>
<title>Sound Machines</title>
<style type="text/css">
<!--
  :link { color: rgb(110, 0, 110); } 
  :visited { color: rgb(110, 0, 110); } 
  body { margin-left: 5px; font-family: arial, sans-serif; 
         background: white; font-size: 12pt } 
  h2 { background: rgb(166,172,255); 
       font-size: 15pt; 
       padding-left: 6px; padding-right: 6px; padding-top: 6px; 
       padding-bottom: 6px; } 
  p { margin-left: 10px; } 
  pre { margin-left: 13px; background: rgb(225,225,225); 
        font-family: monospace; padding-left: 3px; padding-right: 3px; 
        padding-top: 3px; padding-bottom: 3px; } 
-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 4.1beta1.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(Sound Machines.nlogo), and the file NetLogoLite.jar
must all be in the same directory.  (You can copy NetLogoLite.jar
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If NetLogoLite.jar and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put 
a single copy of NetLogoLite.jar in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar,sound/sound.jar"
        width="894" height="473">
  <param name="DefaultModel"
         value="Sound%20Machines.nlogo">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="Sound%20Machines.nlogo">Sound Machines.nlogo</a>
</p>
<h2>WHAT IS IT?</h2>
<p>This model shows one way turtles can make interesting and varied sounds, or if you like, music.  It uses some simple physics to make &quot;machines&quot; that twist, spin, turn, twitch, and bounce.  When a part of the machine touches a wall, ceiling, or floor, it makes a sound.  The pitch of the sound depends on the location of the touch.</p>
<p>You can start with a standard machine, or generate a random one.  You can change and build machines yourself, by changing the characteristics of each part.  You can sit back and let the machines play themselves, or you can use the mouse to move them around to control the sound yourself.</p><br>
<h2>HOW IT WORKS</h2>
<p>The machines are made up of levers.  Levers can be different sizes and are pulled down by gravity (in proportion to their size) and subject to friction.</p>
<p>Each lever has one or two &quot;hooks&quot; to connect it to adjacent levers.  Each lever rather simple-mindedly tries to move and rotate to keep its hooks attached (or at least pointing towards) its neighbors' hooks.</p>
<p>Some levers have additional constraints.  A lever can be fixed in position so it can't move.  It can also rotate, as if powered by a motor.</p>
<p>The rules aren't perfect; for example, sometimes the levers separate.  Nonetheless, the behavior is often surprisingly realistic, and is rich enough to generate interesting motion which generates interesting sounds.</p><br>
<h2>HOW TO USE IT</h2>
<p>Press one of the SETUP... buttons to create a machine.  If you want, change NUM-LEVERS first to get more or fewer levers.</p>
<p>Press GO to start the machine going.  You should start hearing sounds, although if your machine never touches the wall (or ceiling or floor), you won't hear anything.</p>
<p>You can use the mouse to select a lever by clicking on it, or to move a lever by dragging it.  The selected lever has a circle around it.</p>
<p>Once you have selected a lever, a variety of controls on the left let you change that lever's properties.  They are not described in detail here; play with him and see for yourself what they do.</p>
<p>Some parameters affecting the entire system are on the bottom left and the right.  f is friction, g is gravity.  There are also controls for spin.</p>
<p>You can use the INSTRUMENT slider to pick a different musical instrument for the levers to play.</p>
<p>If you make a machine you especially like, you can use Export World and Import World on the File menu to save it out and load it back in again.</p><br>
<h2>THINGS TO NOTICE</h2>
<p>The simple rules followed by the levers produce some quite realistic-looking behavior.</p>
<p>Some machines don't do anything.  Other machines make simple, repetitive motions.  And others are wildly chaotic.</p><br>
<h2>THINGS TO TRY</h2>
<p>Try all of the different SETUP buttons.</p>
<p>Try all of the lever controls on the left.</p>
<p>Explore the effect of the parameters on the right.</p>
<p>See if you can make machines which are somewhat repetitive, but also somewhat unpredictable and chaotic.  Sometimes these make the most pleasing &quot;music&quot;.</p>
<p>Using the command center, tell the turtles to put their pens down (using the PEN-DOWN command, abbreviated PD).  This generates some pleasing patterns.  Use CLEAR-DRAWING (abbreviated CD) to start a new drawing.</p><br>
<h2>EXTENDING THE MODEL</h2>
<p>There are endless possibilities for how the same basic physics engine could be used to generate sound.  The levers could:<br>- Play different instruments, instead of all the same one.<br>- Make percussion sounds in addition pitched sounds.<br>- Make sounds even when they don't hit the wall<br>- Make sounds that depend on their characteristics<br>And so on.</p>
<p>How &quot;normal&quot; and &quot;musical&quot; can you make the model sound?  Currently the rules of the model aren't based on scales or tonality; by choosing pitches more carefully, you might be able to produce music which is less strange, more like music composed by humans.  You could also try to produce more regular rhythms by timing sounds to coincide with a regular beat.</p>
<p>Or, you could take the opposite approach, and see how wild, different, and unusual can you make the sounds.  Make something that doesn't sound like anything you've ever heard before!</p><br>
<h2>NETLOGO FEATURES</h2>
<p>The model uses NetLogo's sound extension.  The sound extension is described in the Sound section of the NetLogo User Manual.</p><br>
<h2>RELATED MODELS</h2>
<p>Beatbox<br>Composer<br>GasLab With Sound<br>Sound Workbench<br>Percussion Workbench</p><br>
<h2>CREDITS AND REFERENCES</h2>
<p>This model is a streamlined variant of the Machines 2005 model created and submitted to the NetLogo User Community Models repository by James Steiner.  Machines 2005 is available from <a href="http://ccl.northwestern.edu/netlogo/models/community/machines-2005">http://ccl.northwestern.edu/netlogo/models/community/machines-2005</a>.</p>
<p>Thanks to James for creating an earlier version which was silent; Seth Tisue for first adding sound to it; and James again for his further improvements, and for releasing the model under a Creative Commons License.</p><br>
<h2>CODE</h2>
<pre><font color="#007f69">extensions</font><font color="#000000"> [sound]

</font><font color="#007f69">globals</font><font color="#000000"> [
  selected    </font><font color="#5a5a5a">;; lever that is currently selected</font><font color="#000000">
  dragged     </font><font color="#5a5a5a">;; lever that is currently being dragged</font><font color="#000000">
]

</font><font color="#660096">breed</font><font color="#000000"> [levers lever]
</font><font color="#007f69">levers-own</font><font color="#000000"> [
  neighbor1 neighbor2  </font><font color="#5a5a5a">;; each holds an adjacent lever (or nobody)</font><font color="#000000">
  fixed?               </font><font color="#5a5a5a">;; if true, lever only turns, never changes position</font><font color="#000000">
  spin                 </font><font color="#5a5a5a">;; -1, 0, or 1</font><font color="#000000">
  len                  </font><font color="#5a5a5a">;; this times SCALE slider equals size</font><font color="#000000">
  new-xcor new-ycor    </font><font color="#5a5a5a">;; next values for xcor and ycor</font><font color="#000000">
  new-heading          </font><font color="#5a5a5a">;; next value for heading</font><font color="#000000">
  xvel yvel            </font><font color="#5a5a5a">;; x and y velocities</font><font color="#000000">
]

</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; SETUP PROCEDURES</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-begin
  </font><font color="#0000aa">clear-all</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> levers </font><font color="#963700">&quot;lever&quot;</font><font color="#000000">
  create-ordered-levers num-levers [
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> new-xcor </font><font color="#963700">0</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000"> ((</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> num-levers) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">world-height</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000"> ) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">-0.8</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> new-ycor </font><font color="#660096">ycor</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> fixed? </font><font color="#963700">false</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> len </font><font color="#963700">0.5</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> neighbor1 </font><font color="#660096">turtle</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)
    </font><font color="#0000aa">set</font><font color="#000000"> neighbor2 </font><font color="#660096">turtle</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)
  ]
  </font><font color="#0000aa">ask</font><font color="#000000"> lever </font><font color="#963700">0</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> fixed? </font><font color="#963700">true</font><font color="#000000"> ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-dangle
  setup-begin
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> (num-levers </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">) [
    </font><font color="#0000aa">set</font><font color="#000000"> len len </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> spin </font><font color="#963700">1</font><font color="#000000">
  ]
  setup-finish
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-finish
  </font><font color="#0000aa">set</font><font color="#000000"> selected </font><font color="#660096">last</font><font color="#000000"> </font><font color="#660096">sort</font><font color="#000000"> levers  </font><font color="#5a5a5a">;; select last lever</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> levers [ lever-display ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-chaos-tentacle
  setup-begin
  </font><font color="#0000aa">ask</font><font color="#000000"> levers
    [ </font><font color="#0000aa">set</font><font color="#000000"> len (num-levers </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">who</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">0.1</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> spin (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    ]
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">first</font><font color="#000000"> </font><font color="#660096">sort</font><font color="#000000"> levers
    [ </font><font color="#0000aa">set</font><font color="#000000"> new-xcor </font><font color="#963700">0</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> new-ycor </font><font color="#963700">0</font><font color="#000000">
      </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> fixed? </font><font color="#963700">true</font><font color="#000000">
    ]
  setup-finish
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-crazy-machine
  setup-begin
  </font><font color="#0000aa">ask</font><font color="#000000"> levers
    [ </font><font color="#5a5a5a">; choose random location, in the inner area of the world</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> new-xcor (</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1.6</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">0.8</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> new-ycor (</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1.6</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">0.8</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000">
      </font><font color="#0000aa">setxy</font><font color="#000000"> new-xcor new-ycor
      </font><font color="#0000aa">set</font><font color="#000000"> fixed? (</font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)
      </font><font color="#0000aa">set</font><font color="#000000"> spin </font><font color="#660096">one-of</font><font color="#000000"> [</font><font color="#963700">-1</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
      </font><font color="#0000aa">set</font><font color="#000000"> len </font><font color="#660096">precision</font><font color="#000000"> (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">) </font><font color="#963700">1</font><font color="#000000">
      lever-display
    ]
  setup-finish
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; RUNTIME PROCEDURES</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> go
  </font><font color="#0000aa">ask</font><font color="#000000"> levers [ monitor-mouse ]
  </font><font color="#0000aa">ask</font><font color="#000000"> levers [ lever! ]
  </font><font color="#0000aa">ask</font><font color="#000000"> levers [ lever-display ]
  </font><font color="#0000aa">tick</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> lever!
  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> dragged
  [ </font><font color="#5a5a5a">; if being dragged, then go there the mouse tells you</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> new-xcor </font><font color="#660096">mouse-xcor</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> new-ycor </font><font color="#660096">mouse-ycor</font><font color="#000000">
  ]
  [
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> fixed?
    [ </font><font color="#0000aa">set</font><font color="#000000"> xvel (xvel </font><font color="#660096">*</font><font color="#000000"> f) </font><font color="#660096">+</font><font color="#000000"> ((n1x2 </font><font color="#660096">-</font><font color="#000000"> x1) </font><font color="#660096">+</font><font color="#000000"> (n2x1 </font><font color="#660096">-</font><font color="#000000"> x2)) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> yvel (yvel </font><font color="#660096">*</font><font color="#000000"> f) </font><font color="#660096">+</font><font color="#000000"> ((n1y2 </font><font color="#660096">-</font><font color="#000000"> y1) </font><font color="#660096">+</font><font color="#000000"> (n2y1 </font><font color="#660096">-</font><font color="#000000"> y2)) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> yvel yvel </font><font color="#660096">-</font><font color="#000000"> g </font><font color="#660096">*</font><font color="#000000"> len
      </font><font color="#0000aa">set</font><font color="#000000"> new-xcor </font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> xvel
      </font><font color="#0000aa">set</font><font color="#000000"> new-ycor </font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> yvel
      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> new-xcor </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> xvel xvel </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">-0.99</font><font color="#000000">
                                    </font><font color="#0000aa">set</font><font color="#000000"> new-xcor </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> sign new-xcor </font><font color="#660096">+</font><font color="#000000"> xvel
                                    bonk! </font><font color="#660096">ycor</font><font color="#000000"> ]
      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> new-ycor </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> yvel yvel </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">-0.99</font><font color="#000000">
                                    </font><font color="#0000aa">set</font><font color="#000000"> new-ycor </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> sign new-ycor </font><font color="#660096">+</font><font color="#000000"> yvel
                                    bonk! </font><font color="#660096">xcor</font><font color="#000000"> ]
    ]
  ]
  </font><font color="#5a5a5a">; calculate new heading of lever</font><font color="#000000">
  </font><font color="#5a5a5a">; if node2 of neighbor1 is overlapping center, keep same heading</font><font color="#000000">
  </font><font color="#5a5a5a">; otherwise, find heading to hook 2 of neighbor1</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> a </font><font color="#963700">180</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> b </font><font color="#660096">heading</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">distancexy</font><font color="#000000"> n1x2 n1y2 </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [ </font><font color="#0000aa">set</font><font color="#000000"> a </font><font color="#963700">180</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">towardsxy</font><font color="#000000"> n1x2 n1y2 ]
  </font><font color="#5a5a5a">; likewise hook 1 of neighbor2</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">distancexy</font><font color="#000000"> n2x1 n2y1 </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [ </font><font color="#0000aa">set</font><font color="#000000"> b </font><font color="#660096">towardsxy</font><font color="#000000"> n2x1 n2y1 ]
  </font><font color="#5a5a5a">; use trig to take mean of a and b</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> new-heading </font><font color="#660096">atan</font><font color="#000000"> (</font><font color="#660096">sin</font><font color="#000000"> a </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">sin</font><font color="#000000"> b)
                       (</font><font color="#660096">cos</font><font color="#000000"> a </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">cos</font><font color="#000000"> b)
                  </font><font color="#660096">+</font><font color="#000000"> spin </font><font color="#660096">*</font><font color="#000000"> spin-speed
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> lever-display
  </font><font color="#0000aa">setxy</font><font color="#000000"> new-xcor new-ycor
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> new-heading
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> len
  </font><font color="#0000aa">let</font><font color="#000000"> -s </font><font color="#963700">&quot;&quot;</font><font color="#000000">
  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> selected
  [ </font><font color="#0000aa">set</font><font color="#000000"> -s </font><font color="#963700">&quot;-s&quot;</font><font color="#000000">
    </font><font color="#0000aa">let</font><font color="#000000"> new-label (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;selected: &quot;</font><font color="#000000"> </font><font color="#660096">who</font><font color="#000000"> </font><font color="#963700">&quot; - &quot;</font><font color="#000000"> (</font><font color="#660096">precision</font><font color="#000000"> len </font><font color="#963700">2</font><font color="#000000">) </font><font color="#963700">&quot; &quot;</font><font color="#000000">)
    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">plabel</font><font color="#000000"> new-label ]
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#660096">who</font><font color="#000000"> </font><font color="#963700">&quot; - &quot;</font><font color="#000000"> (</font><font color="#660096">precision</font><font color="#000000"> len </font><font color="#963700">2</font><font color="#000000">) </font><font color="#963700">&quot; &quot;</font><font color="#000000">  </font><font color="#963700">&quot; ----&gt;     &quot;</font><font color="#000000">)
  ]
  [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#963700">&quot;&quot;</font><font color="#000000"> ]
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;lever&quot;</font><font color="#000000">
                  </font><font color="#660096">ifelse-value</font><font color="#000000"> fixed? [</font><font color="#963700">&quot;-f&quot;</font><font color="#000000">] [</font><font color="#963700">&quot;&quot;</font><font color="#000000">]
                  </font><font color="#660096">item</font><font color="#000000"> (spin </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#963700">&quot;-ws&quot;</font><font color="#000000"> </font><font color="#963700">&quot;&quot;</font><font color="#000000"> </font><font color="#963700">&quot;-cw&quot;</font><font color="#000000">]
                  -s)
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; lever procedures; these report the x and y coordinates</font><font color="#000000">
</font><font color="#5a5a5a">;; of this lever's hooks</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> x1 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">dx</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> len </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> y1 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">dy</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> len </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> x2 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">dx</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> len </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> y2 </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">dy</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> scale </font><font color="#660096">*</font><font color="#000000"> len </font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; lever procedures; these report the x and y coordinates</font><font color="#000000">
</font><font color="#5a5a5a">;; of our neighbor's hooks. if no neighbor, use own hook.</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n1x1 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor1 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> x2 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [x1] </font><font color="#660096">of</font><font color="#000000"> neighbor1 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n1y1 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor1 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> y2 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [y1] </font><font color="#660096">of</font><font color="#000000"> neighbor1 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n1x2 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor1 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> x1 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [x2] </font><font color="#660096">of</font><font color="#000000"> neighbor1 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n1y2 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor1 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> y1 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [y2] </font><font color="#660096">of</font><font color="#000000"> neighbor1 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n2x1 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor2 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> x2 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [x1] </font><font color="#660096">of</font><font color="#000000"> neighbor2 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n2y1 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor2 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> y2 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [y1] </font><font color="#660096">of</font><font color="#000000"> neighbor2 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n2x2 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor2 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> x1 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [x2] </font><font color="#660096">of</font><font color="#000000"> neighbor2 ] </font><font color="#007f69">end</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> n2y2 </font><font color="#0000aa">ifelse</font><font color="#000000"> neighbor2 </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> y1 ] [ </font><font color="#0000aa">report</font><font color="#000000"> [y2] </font><font color="#660096">of</font><font color="#000000"> neighbor2 ] </font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> sign [a]
  </font><font color="#0000aa">ifelse</font><font color="#000000"> a </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> ]
    [ </font><font color="#0000aa">ifelse</font><font color="#000000"> a </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">-1</font><font color="#000000"> ]
                   [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ] ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; SELECTION &amp; DRAGGING PROCEDURES</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> monitor-mouse
  </font><font color="#0000aa">let</font><font color="#000000"> mouse-here? </font><font color="#660096">abs</font><font color="#000000"> (</font><font color="#660096">mouse-xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> scale </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000">
                  </font><font color="#660096">abs</font><font color="#000000"> (</font><font color="#660096">mouse-ycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> scale </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
  </font><font color="#0000aa">ifelse</font><font color="#000000"> mouse-here?
  [ </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> ] ]
  [ </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000">  [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">14</font><font color="#000000">) </font><font color="#660096">base-colors</font><font color="#000000"> ] ]
  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">mouse-down?</font><font color="#000000">
  [ </font><font color="#0000aa">if</font><font color="#000000"> dragged </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> mouse-here?
    [ </font><font color="#0000aa">set</font><font color="#000000"> dragged </font><font color="#660096">self</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> selected </font><font color="#660096">self</font><font color="#000000">
    ]
  ]
  [ </font><font color="#0000aa">set</font><font color="#000000"> dragged </font><font color="#963700">nobody</font><font color="#000000"> ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> select-lever [which-lever]
  </font><font color="#0000aa">let</font><font color="#000000"> new lever (which-lever </font><font color="#660096">+</font><font color="#000000"> [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> selected)
  </font><font color="#0000aa">if</font><font color="#000000"> new </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> selected new ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; SOUND PROCEDURES</font><font color="#000000">
</font><font color="#5a5a5a">;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> bonk! [coordinate]
  </font><font color="#0000aa">sound:play-note</font><font color="#000000"> my-instrument (pitch coordinate) </font><font color="#963700">90</font><font color="#000000"> </font><font color="#963700">0.05</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> pitch [coordinate]  </font><font color="#5a5a5a">;; lever procedure</font><font color="#000000">
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">16</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">round</font><font color="#000000"> (</font><font color="#963700">96</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> (coordinate </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#660096">world-width</font><font color="#000000">)
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> my-instrument  </font><font color="#5a5a5a">;; lever procedure</font><font color="#000000">
  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">item</font><font color="#000000"> ((</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> instrument) </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#660096">length</font><font color="#000000"> </font><font color="#660096">sound:instruments</font><font color="#000000">)
              </font><font color="#660096">sound:instruments</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">
</font>
</pre>

</body>
</html>
